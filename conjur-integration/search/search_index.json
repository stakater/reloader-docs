{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"What is Reloader?","text":""},{"location":"index.html#what-is-reloader","title":"What is Reloader?","text":"<p>Configuration changes, applied safely \u2014 every time.</p> <p>Reloader ensures that configuration and secret changes in Kubernetes are applied to running workloads in a safe, automatic, and consistent way.</p> <p>In Kubernetes, updating a ConfigMap or Secret does not automatically update running Pods. Without additional controls, this often leads to manual restarts, stale configuration, and operational risk.</p> <p>Reloader closes this gap by observing configuration changes and triggering workload updates based on explicit and predictable rules.</p>"},{"location":"index.html#why-reloader-exists","title":"Why Reloader Exists","text":"<p>In many Kubernetes environments, configuration changes rely on manual intervention or best-effort operational practices.</p> <p>Common challenges include:</p> <ul> <li>Workloads running with outdated configuration or secrets</li> <li>Manual restarts causing downtime or errors</li> <li>Inconsistent behavior across environments</li> <li>Platform teams becoming operational bottlenecks</li> </ul> <p>Reloader was created to make configuration changes deterministic operational events, rather than ad-hoc procedures.</p>"},{"location":"index.html#reloaders-operational-model","title":"Reloader\u2019s Operational Model","text":"<p>Reloader introduces a consistent operational model for handling configuration and secret changes in Kubernetes.</p> <p>At a high level:</p> <ol> <li>Configuration or secrets are updated</li> <li>Reloader detects the change</li> <li>A controlled workload update is triggered</li> <li>The updated configuration is applied at runtime</li> </ol> <p>This model ensures that approved configuration changes are actually reflected in running workloads, without requiring application changes or manual intervention.</p>"},{"location":"index.html#deterministic-change-propagation","title":"Deterministic Change Propagation","text":"<p>Reloader ensures that configuration changes are not silently ignored. Once a change is detected, the corresponding workload update follows a predictable and observable path.</p>"},{"location":"index.html#reduced-operational-risk","title":"Reduced Operational Risk","text":"<p>By removing ad-hoc restarts and manual procedures, Reloader reduces human error and improves platform reliability.</p>"},{"location":"eula.html","title":"EULA","text":""},{"location":"eula.html#eula","title":"EULA","text":"<p>Last revision date: 12 December 2022</p> <p>IMPORTANT: THIS SOFTWARE END-USER LICENSE AGREEMENT (\"EULA\") IS A LEGAL AGREEMENT (\"Agreement\") BETWEEN YOU (THE CUSTOMER, EITHER AS AN INDIVIDUAL OR, IF PURCHASED OR OTHERWISE ACQUIRED BY OR FOR AN ENTITY, AS AN ENTITY) AND Stakater AB OR ITS SUBSIDUARY (\"COMPANY\"). READ IT CAREFULLY BEFORE COMPLETING THE INSTALLATION PROCESS AND USING MULTI TENANT OPERATOR (\"SOFTWARE\"). IT PROVIDES A LICENSE TO USE THE SOFTWARE AND CONTAINS WARRANTY INFORMATION AND LIABILITY DISCLAIMERS. BY INSTALLING AND USING THE SOFTWARE, YOU ARE CONFIRMING YOUR ACCEPTANCE OF THE SOFTWARE AND AGREEING TO BECOME BOUND BY THE TERMS OF THIS AGREEMENT.</p> <p>In order to use the Software under this Agreement, you must receive a license key at the time of purchase, in accordance with the scope of use and other terms specified and as set forth in Section 1 of this Agreement.</p>"},{"location":"eula.html#1-license-grant","title":"1. License Grant","text":"<ul> <li> <p>1.1 General Use. This Agreement grants you a non-exclusive, non-transferable, limited license to the use rights for the Software, subject to the terms and conditions in this Agreement. The Software is licensed, not sold.</p> </li> <li> <p>1.2 Electronic Delivery. All Software and license documentation shall be delivered by electronic means unless otherwise specified on the applicable invoice or at the time of purchase. Software shall be deemed delivered when it is made available for download for you by the Company (\"Delivery\").</p> </li> </ul>"},{"location":"eula.html#2-modifications","title":"2. Modifications","text":"<ul> <li> <p>2.1 No Modifications may be created of the original Software. \"Modification\" means:</p> <ul> <li> <p>(a) Any addition to or deletion from the contents of a file included in the original Software</p> </li> <li> <p>(b) Any new file that contains any part of the original Software</p> </li> </ul> </li> </ul>"},{"location":"eula.html#3-restricted-uses","title":"3. Restricted Uses","text":"<ul> <li> <p>3.1 You shall not (and shall not allow any third party to):</p> <ul> <li> <p>(a) reverse engineer the Software or attempt to reconstruct or discover any source code, underlying ideas, algorithms, file formats or programming interfaces of the Software by any means whatsoever (except and only to the extent that applicable law prohibits or restricts reverse engineering restrictions);</p> </li> <li> <p>(b) distribute, sell, sub-license, rent, lease or use the Software for time sharing, hosting, service provider or like purposes, except as expressly permitted under this Agreement;</p> </li> <li> <p>(c) redistribute the Software;</p> </li> <li> <p>(d) remove any product identification, proprietary, copyright or other notices contained in the Software;</p> </li> <li> <p>(e) modify any part of the Software, create a derivative work of any part of the Software (except as permitted in Section 4), or incorporate the Software, except to the extent expressly authorized in writing by the Company;</p> </li> <li> <p>(f) publicly disseminate performance information or analysis (including, without limitation, benchmarks) from any source relating to the Software;</p> </li> <li> <p>(g) utilize any equipment, device, software, or other means designed to circumvent or remove any form of Source URL or copy protection used by the Company in connection with the Software, or use the Software together with any authorization code, Source URL, serial number, or other copy protection device not supplied by the Company;</p> </li> <li> <p>(h) use the Software to develop a product which is competitive with any of the Company's product offerings;</p> </li> <li> <p>(i) use unauthorized Source URLs or license key(s) or distribute or publish Source URLs or license key(s), except as may be expressly permitted by the Company in writing. If your unique license is ever published, the Company reserves the right to terminate your access without notice.</p> </li> </ul> </li> <li> <p>3.2 Under no circumstances may you use the Software as part of a product or service that provides similar functionality to the Software itself.</p> </li> </ul>"},{"location":"eula.html#4-ownership","title":"4. Ownership","text":"<ul> <li>4.1 Notwithstanding anything to the contrary contained herein, except for the limited license rights expressly provided herein, the Company and its suppliers have and will retain all rights, title and interest (including, without limitation, all patent, copyright, trademark, trade secret and other intellectual property rights) in and to the Software and all copies, modifications and derivative works thereof (including any changes which incorporate any of your ideas, feedback or suggestions). You acknowledge that you are obtaining only a limited license right to the Software, and that irrespective of any use of the words \"purchase\", \"sale\" or like terms hereunder no ownership rights are being conveyed to you under this Agreement or otherwise.</li> </ul>"},{"location":"eula.html#5-fees-and-payment","title":"5. Fees and Payment","text":"<ul> <li>5.1 The Software license fees will be due and payable in full as set forth in the applicable invoice or at the time of purchase. You shall be responsible for all taxes, with-holdings, duties and levies arising from the order (excluding taxes based on the net income of the Company).</li> </ul>"},{"location":"eula.html#6-support-maintenance-and-services","title":"6. Support, Maintenance and Services","text":"<ul> <li>6.1 Subject to the terms and conditions of this Agreement, as set forth in your invoice, and as set forth on the Stakater support page, support and maintenance services may be included with the purchase of your license subscription.</li> </ul>"},{"location":"eula.html#7-disclaimer-of-warranties","title":"7. Disclaimer of Warranties","text":"<ul> <li> <p>7.1 The Software is provided \"as is\", with all faults, defects and errors, and without warranty of any kind. The Company does not warrant that the Software will be free of bugs, errors, or other defects, and the Company shall have no liability of any kind for the use of or inability to use the Software, the Software content or any associated service, and you acknowledge that it is not technically practicable for the Company to do so.</p> </li> <li> <p>7.2 To the maximum extent permitted by applicable law, the Company disclaims all warranties, express, implied, arising by law or otherwise, regarding the Software, the Software content and their respective performance or suitability for your intended use, including without limitation any implied warranty of merchantability, fitness for a particular purpose.</p> </li> </ul>"},{"location":"eula.html#8-limitation-of-liability","title":"8. Limitation of Liability","text":"<ul> <li> <p>8.1 In no event will the Company be liable for any direct, indirect, consequential, incidental, special, exemplary, or punitive damages or liabilities whatsoever arising from or relating to the Software, the Software content or this Agreement, whether based on contract, tort (including negligence), strict liability or other theory, even if the Company has been advised of the possibility of such damages.</p> </li> <li> <p>8.2 In no event will the Company's liability exceed the Software license price as indicated in the invoice. The existence of more than one claim will not enlarge or extend this limit.</p> </li> </ul>"},{"location":"eula.html#9-remedies","title":"9. Remedies","text":"<ul> <li> <p>9.1 Your exclusive remedy and the Company's entire liability for breach of this Agreement shall be limited, at the Company's sole and exclusive discretion, to:</p> <ul> <li> <p>(a) replacement of any defective software or documentation; or</p> </li> <li> <p>(b) refund of the license fee paid to the Company</p> </li> </ul> </li> </ul>"},{"location":"eula.html#10-acknowledgements","title":"10. Acknowledgements","text":"<ul> <li> <p>10.1 Consent to the Use of Data. You agree that the Company and its affiliates may collect and use technical information gathered as part of the product support services. The Company may use this information solely to improve products and services and will not disclose this information in a form that personally identifies individuals or organizations.</p> </li> <li> <p>10.2 Government End Users. If the Software and related documentation are supplied to or purchased by or on behalf of a Government, then the Software is deemed to be \"commercial software\" as that term is used in the acquisition regulation system.</p> </li> </ul>"},{"location":"eula.html#11-third-party-software","title":"11. Third Party Software","text":"<ul> <li> <p>11.1 Examples included in Software may provide links to third party libraries or code (collectively \"Third Party Software\") to implement various functions. Third Party Software does not comprise part of the Software. In some cases, access to Third Party Software may be included along with the Software delivery as a convenience for demonstration purposes. Licensee acknowledges:</p> <ul> <li> <p>(1) That some part of Third Party Software may require additional licensing of copyright and patents from the owners of such, and</p> </li> <li> <p>(2) That distribution of any of the Software referencing or including any portion of a Third Party Software may require appropriate licensing from such third parties</p> </li> </ul> </li> </ul>"},{"location":"eula.html#12-miscellaneous","title":"12. Miscellaneous","text":"<ul> <li> <p>12.1 Entire Agreement. This Agreement sets forth our entire agreement with respect to the Software and the subject matter hereof and supersedes all prior and contemporaneous understandings and agreements whether written or oral.</p> </li> <li> <p>12.2 Amendment. The Company reserves the right, in its sole discretion, to amend this Agreement from time. Amendments are managed as described in General Provisions.</p> </li> <li> <p>12.3 Assignment. You may not assign this Agreement or any of its rights under this Agreement without the prior written consent of The Company and any attempted assignment without such consent shall be void.</p> </li> <li> <p>12.4 Export Compliance. You agree to comply with all applicable laws and regulations, including laws, regulations, orders or other restrictions on export, re-export or redistribution of software.</p> </li> <li> <p>12.5 Indemnification. You agree to defend, indemnify, and hold harmless the Company from and against any lawsuits, claims, losses, damages, fines and expenses (including attorneys' fees and costs) arising out of your use of the Software or breach of this Agreement.</p> </li> <li> <p>12.6 Attorneys' Fees and Costs. The prevailing party in any action to enforce this Agreement will be entitled to recover its attorneys' fees and costs in connection with such action.</p> </li> <li> <p>12.7 Severability. If any provision of this Agreement is held by a court of competent jurisdiction to be invalid, illegal, or unenforceable, the remainder of this Agreement will remain in full force and effect.</p> </li> <li> <p>12.8 Waiver. Failure or neglect by either party to enforce at any time any of the provisions of this license Agreement shall not be construed or deemed to be a waiver of that party's rights under this Agreement.</p> </li> <li> <p>12.9 Audit. The Company may, at its expense, appoint its own personnel or an independent third party to audit the numbers of installations of the Software in use by you. Any such audit shall be conducted upon thirty (30) days prior notice, during regular business hours and shall not unreasonably interfere with your business activities.</p> </li> <li> <p>12.10 Headings. The headings of sections and paragraphs of this Agreement are for convenience of reference only and are not intended to restrict, affect or be of any weight in the interpretation or construction of the provisions of such sections or paragraphs.</p> </li> </ul>"},{"location":"eula.html#13-contact-information","title":"13. Contact Information","text":"<ul> <li>13.1 If you have any questions about this EULA, or if you want to contact the Company for any reason, please direct correspondence to <code>sales@stakater.com</code>.</li> </ul>"},{"location":"help.html","title":"Support","text":""},{"location":"help.html#to-get-help","title":"To get help","text":"<p>If you need assistance, please create a support ticket in the support portal.</p>"},{"location":"versions.html","title":"Versions","text":""},{"location":"versions.html#reloader-enterprise-release-history","title":"Reloader Enterprise \u2013 Release History","text":""},{"location":"versions.html#v1410","title":"v1.4.10","text":""},{"location":"versions.html#release-metadata","title":"Release Metadata","text":"Version<code>v1.4.10</code> Container Image<code>ghcr.io/stakater/reloader-enterprise:v1.4.10</code> Container Image UBI<code>ghcr.io/stakater/reloader-enterprise:v1.4.10-ubi</code> Reloader OSS Release NotesRelease Notes"},{"location":"versions.html#sbom","title":"SBOM","text":"Click to expand SBOM JSON <pre><code>{\n  \"artifacts\": [\n    {\n      \"name\": \"ghcr.io/stakater/reloader-enterprise:v1.4.10\",\n      \"digest\": \"sha256:b20e65ed59211bb03c8873767c45ca491385d6956913ebd8b31030e29f734b08\"\n    },\n    {\n      \"name\": \"ghcr.io/stakater/reloader-enterprise:v1.4.10-ubi\",\n      \"digest\": \"sha256:7717317a0aff163e22c572f0a9644fe5f41128c1f525d2a95e4f91d994193fb6\"\n    }\n  ]\n}\n</code></pre>"},{"location":"versions.html#v149","title":"v1.4.9","text":""},{"location":"versions.html#release-metadata_1","title":"Release Metadata","text":"Version<code>v1.4.9</code> Container Image<code>ghcr.io/stakater/reloader-enterprise:v1.4.9</code> Container Image UBI<code>ghcr.io/stakater/reloader-enterprise:v1.4.9-ubi</code> Reloader OSS Release NotesRelease Notes"},{"location":"versions.html#sbom_1","title":"SBOM","text":"Click to expand SBOM JSON <pre><code>{\n  \"artifacts\": [\n    {\n      \"name\": \"ghcr.io/stakater/reloader-enterprise:v1.4.9\",\n      \"digest\": \"sha256:60a7c16e00d6df071161235e9b949283e206faa77b061247b87d54d7ca81bad0\"\n    },\n    {\n      \"name\": \"ghcr.io/stakater/reloader-enterprise:v1.4.9-ubi\",\n      \"digest\": \"sha256:2cc7f1b206b78d3530050406feed4a5acf2ae3b0bd59e8eb9f3d1c9120c8c6d4\"\n    }\n  ]\n}\n</code></pre> <p>Generated by automation</p>"},{"location":"about/editions.html","title":"OSS vs Enterprise","text":""},{"location":"about/editions.html#reloader-editions","title":"Reloader Editions","text":"<p>Reloader is available in two editions: OSS and Enterprise.</p>"},{"location":"about/editions.html#edition-comparison","title":"Edition comparison","text":"Capability Reloader OSS Reloader Enterprise Core reload functionality \u2705 \u2705 Kubernetes-native behavior \u2705 \u2705 Works with any Secret delivery mechanism (ESO, CSI, init containers, etc.) \u2705 \u2705 Hardened and verified container images \u274c \u2705 Validated integrations \u274c \u2705 Continuous integration testing \u274c \u2705 Upgrade &amp; compatibility guarantees \u274c \u2705 Long-term maintenance &amp; backported fixes \u274c \u2705 Commercial support &amp; SLA \u274c \u2705 Production onboarding &amp; guidance \u274c \u2705 Suitable for regulated / audited environments \u274c \u2705"},{"location":"about/value-by-role.html","title":"Value by Role","text":""},{"location":"about/value-by-role.html#value-by-role","title":"Value by Role","text":"<p>Reloader is used by multiple roles within an organization. While the underlying operational model is the same, its impact differs depending on responsibility and scope.</p> <p>This page describes how different roles typically interact with and benefit from Reloader.</p>"},{"location":"about/value-by-role.html#platform-engineers-and-sres","title":"Platform Engineers and SREs","text":"<p>Platform teams are responsible for cluster stability, consistency, and operational safety across environments.</p> <p>Reloader supports platform teams by:</p> <ul> <li>Ensuring configuration and secret changes are applied consistently</li> <li>Eliminating the need for manual restarts and ad-hoc operational procedures</li> <li>Reducing configuration drift across clusters and environments</li> <li>Providing a predictable and observable model for change propagation</li> </ul> <p>By standardizing how configuration changes are handled, platform teams can reduce operational toil and lower the risk of incidents caused by stale configuration.</p> <p>Advanced governance and audit capabilities are available in Reloader Enterprise.</p>"},{"location":"about/value-by-role.html#application-developers","title":"Application Developers","text":"<p>Application teams are often affected by configuration issues without having direct control over the underlying platform.</p> <p>Reloader enables application teams to:</p> <ul> <li>Rely on configuration and secret changes being applied automatically</li> <li>Avoid application-specific reload logic</li> <li>Experience consistent runtime behavior across environments</li> </ul> <p>This allows developers to focus on application logic while the platform handles configuration change propagation in a uniform way.</p>"},{"location":"about/value-by-role.html#security-risk-and-compliance","title":"Security, Risk, and Compliance","text":"<p>Security and compliance teams require confidence that approved configuration changes are enforced in runtime environments.</p> <p>Reloader contributes by:</p> <ul> <li>Reducing reliance on manual operational procedures</li> <li>Ensuring approved configuration and secret changes are consistently applied</li> <li>Creating a clearer link between desired configuration and runtime behavior</li> </ul> <p>In regulated environments, this reduces operational risk and simplifies audit and compliance discussions.</p> <p>Structured audit and governance capabilities are available in Reloader Enterprise.</p>"},{"location":"about/value-by-role.html#engineering-management","title":"Engineering Management","text":"<p>Engineering leaders are responsible for balancing delivery speed, reliability, and operational risk.</p> <p>Reloader supports this by:</p> <ul> <li>Reducing incidents caused by configuration drift</li> <li>Lowering operational overhead on platform teams</li> <li>Enabling platform scale without proportional increases in operational effort</li> </ul> <p>This helps organizations operate Kubernetes environments more predictably as they grow.</p>"},{"location":"about/why-reloader-matters.html","title":"Why Reloader Matters","text":""},{"location":"about/why-reloader-matters.html#why-reloader-matters","title":"Why Reloader Matters","text":"<p>Reloader addresses a class of operational problems that emerge when configuration changes are not consistently applied to running workloads.</p> <p>This page describes the key outcomes Reloader provides when used as part of a Kubernetes platform.</p>"},{"location":"about/why-reloader-matters.html#1-operational-reliability","title":"1. Operational Reliability","text":"<p>Reloader ensures that configuration and secret changes are not silently ignored by running workloads.</p> <p>This helps prevent:</p> <ul> <li>Workloads running with stale configuration</li> <li>Configuration updates being forgotten or partially applied</li> <li>Incidents caused by configuration drift between desired and runtime state</li> </ul>"},{"location":"about/why-reloader-matters.html#2-change-safety","title":"2. Change Safety","text":"<p>Uncontrolled restarts can introduce instability and unintended side effects.</p> <p>Reloader introduces a controlled mechanism for applying configuration changes which enables:</p> <ul> <li>Scoped and predictable workload updates</li> <li>Reduced blast radius during configuration changes</li> <li>Clean integration with GitOps-based workflows</li> </ul>"},{"location":"about/why-reloader-matters.html#3-operational-transparency","title":"3. Operational Transparency","text":"<p>Understanding when and why configuration changes are applied is critical for day-to-day operations and incident analysis.</p> <p>Reloader provides clear and observable behavior around configuration-driven workload updates, making it easier to:</p> <ul> <li>Understand what triggered a workload update</li> <li>Correlate configuration changes with runtime behavior</li> <li>Diagnose issues related to configuration propagation</li> </ul>"},{"location":"about/why-reloader-matters.html#4-compliance-efficiency","title":"4. Compliance Efficiency","text":"<p>In regulated environments, it is important that approved configuration changes are consistently enforced in runtime systems.</p> <p>Reloader supports this by:</p> <ul> <li>Reducing reliance on manual operational procedures</li> <li>Creating a clearer link between approved configuration and runtime behavior</li> <li>Lowering operational and audit risk caused by human error</li> </ul> <p>Additional governance and audit capabilities are available in Reloader Enterprise.</p>"},{"location":"about/why-reloader-matters.html#5-clear-separation-of-responsibilities","title":"5. Clear Separation of Responsibilities","text":"<p>Reloader helps enforce a clean separation of responsibilities between platform teams and application teams.</p> <ul> <li>Platform teams define how configuration changes are propagated</li> <li>Application teams consume configuration without implementing reload logic</li> </ul> <p>This reduces coupling between application code and platform operations, leading to more maintainable systems over time.</p>"},{"location":"about/why-reloader-matters.html#6-platform-scale","title":"6. Platform Scale","text":"<p>As Kubernetes environments grow, ad-hoc configuration handling does not scale.</p> <p>Reloader enables platform teams to:</p> <ul> <li>Apply a single, consistent pattern for configuration changes</li> <li>Reduce custom logic across teams and applications</li> <li>Enable safe self-service for application teams without increasing risk</li> </ul>"},{"location":"installation/install.html","title":"Reloader Enterprise","text":""},{"location":"installation/install.html#reloader-enterprise-re-installation","title":"Reloader Enterprise (RE) Installation","text":"<p>Reloader Enterprise (RE) is distributed through GitHub Container Registry (<code>GHCR</code>). Access to enterprise images is granted through GitHub, using a private package-proxy repository.</p> <p>To install Reloader Enterprise, customers must:</p> <ol> <li>Have an active Reloader Enterprise subscription  </li> <li>Receive access to the private package registry  </li> <li>Authenticate their Kubernetes cluster to pull the enterprise image  </li> <li>Install using the OSS Helm chart with enterprise overrides  </li> </ol> <p>This section explains how access is granted and how to perform the installation.</p>"},{"location":"installation/install.html#how-access-to-reloader-enterprise-is-granted","title":"How Access to Reloader Enterprise Is Granted?","text":"<p>Stakater provides access to Reloader Enterprise through a private GitHub package proxy repository.</p> <p>When you are added as a customer:</p> <ul> <li>You receive the <code>read</code> role  </li> <li>You can pull Reloader Enterprise images  </li> <li>You can view contributors  </li> <li>You cannot create branches, modify the code, or view other collaborators  </li> </ul> <p>The repository acts as a proxy to private build sources. It does not build artifacts itself.</p> <p>Access is available only to active Reloader Enterprise customers.</p>"},{"location":"installation/install.html#installation-overview","title":"Installation Overview","text":"<p>After access is granted, you may install Reloader Enterprise in one of two ways:</p>"},{"location":"installation/install.html#option-a-use-your-github-user","title":"Option A \u2014 Use Your GitHub User","text":"<p>You provide Stakater with your GitHub username. This user is added as a collaborator to the enterprise package repository.</p>"},{"location":"installation/install.html#option-b-use-a-token-provided-by-stakater","title":"Option B \u2014 Use a Token Provided by Stakater","text":"<p>Stakater issues a dedicated <code>reloader-enterprise</code> access token.</p> <p>Both methods require creating a Kubernetes registry secret and running a Helm install.</p>"},{"location":"installation/install.html#installation-method-a-using-your-github-user","title":"Installation Method A \u2014 Using Your GitHub User","text":""},{"location":"installation/install.html#step-1-become-a-collaborator","title":"Step 1 \u2014 Become a collaborator","text":"<p>Stakater adds your GitHub user to the private enterprise package proxy. You must accept the GitHub invitation.</p>"},{"location":"installation/install.html#step-2-create-a-github-personal-access-token-pat","title":"Step 2 \u2014 Create a GitHub Personal Access Token (PAT)","text":"<p>Create a token with the following scope:</p> <ul> <li><code>read:packages</code></li> </ul>"},{"location":"installation/install.html#step-3-store-the-pat-in-kubernetes","title":"Step 3 \u2014 Store the PAT in Kubernetes","text":"<pre><code>kubectl create secret docker-registry regcred \\\n  --docker-server=ghcr.io \\\n  --docker-username=&lt;github-username&gt; \\\n  --docker-password=&lt;github-token&gt;\n</code></pre>"},{"location":"installation/install.html#step-4-install-reloader-enterprise-via-helm","title":"Step 4 \u2014 Install Reloader Enterprise via Helm","text":"<pre><code>helm install stakater/reloader \\\n  --set image.repository=ghcr.io/stakater/reloader-enterprise \\\n  --set image.tag=&lt;version&gt; \\\n  --set \"global.imagePullSecrets[0].name=regcred\" \\\n  --generate-name\n</code></pre>"},{"location":"installation/install.html#installation-method-b-using-a-token-provided-by-stakater","title":"Installation Method B \u2014 Using a Token Provided by Stakater","text":""},{"location":"installation/install.html#step-1-request-a-stakater-issued-token","title":"Step 1 \u2014 Request a Stakater-issued token","text":"<p>This token is tied to the <code>reloader-enterprise</code> GitHub service account.</p>"},{"location":"installation/install.html#step-2-store-the-token-in-kubernetes","title":"Step 2 \u2014 Store the token in Kubernetes","text":"<pre><code>kubectl create secret docker-registry regcred \\\n  --docker-server=ghcr.io \\\n  --docker-username=reloader-enterprise \\\n  --docker-password=&lt;token-from-stakater&gt;\n</code></pre>"},{"location":"installation/install.html#step-3-install-the-enterprise-image-via-helm","title":"Step 3 \u2014 Install the enterprise image via Helm","text":"<pre><code>helm install stakater/reloader \\\n  --set image.repository=ghcr.io/stakater/reloader-enterprise \\\n  --set image.tag=&lt;version&gt; \\\n  --set \"global.imagePullSecrets[0].name=regcred\" \\\n  --generate-name\n</code></pre>"},{"location":"installation/install.html#checking-available-versions","title":"Checking Available Versions","text":"<p>Reloader Enterprise uses the same image tags as the open-source version, but only versions that have passed enterprise-grade validation are published.</p>"},{"location":"installation/install.html#view-versions-in-github-packages","title":"View versions in GitHub Packages","text":"<p>Reloader Enterprise images are hosted in a private GitHub Container Registry (GHCR) repository.</p> <p>Once access is granted, customers can view available versions at:</p> <p><code>ghcr.io/stakater/reloader-enterprise-package-proxy</code></p> <p>\u26a0\ufe0f This repository is private. If you are not logged in to GitHub or your GitHub account does not have access, GitHub will return 404 Not Found. This is expected behavior.</p> <p>If you believe you should have access but cannot view the repository, please contact Stakater support.</p>"},{"location":"installation/install.html#or-via-github-api","title":"Or via GitHub API","text":"<pre><code>curl -L \\\n -H \"Accept: application/vnd.github+json\" \\\n -H \"Authorization: Bearer &lt;token&gt;\" \\\n -H \"X-GitHub-Api-Version: 2022-11-28\" \\\n https://api.github.com/orgs/stakater/packages/container/reloader-enterprise/versions\n</code></pre>"},{"location":"installation/install.html#access-requirements","title":"Access Requirements","text":"<p>Access to the enterprise package repository is granted only to organizations with an active Reloader Enterprise subscription. If the subscription expires, access is automatically revoked.</p>"},{"location":"integrations/index.html","title":"Overview","text":""},{"location":"integrations/index.html#integrations-overview","title":"Integrations Overview","text":"<p>Reloader integrates with a wide range of Kubernetes-native tools for secrets management, certificate automation, and configuration delivery.</p> <p>This section provides an overview of:</p> <ul> <li>How integrations work with Reloader</li> <li>The different support and validation levels</li> <li>Which integrations are validated and supported in Reloader Enterprise</li> <li>What community users can expect</li> </ul> <p>Each integration has its own dedicated section with architecture notes, step-by-step examples, and operational considerations.</p>"},{"location":"integrations/index.html#how-integrations-work-with-reloader","title":"How integrations work with Reloader","text":"<p>Reloader itself is tool-agnostic.</p> <p>It watches Kubernetes resources such as:</p> <ul> <li><code>Secrets</code></li> <li><code>ConfigMaps</code></li> </ul> <p>When these change, Reloader can trigger safe rollouts of supported workloads (e.g. Deployments, StatefulSets, Rollouts), regardless of how those resources were created or updated.</p> <p>Integrations typically follow this flow:</p> <pre><code>External system\n\u2193\nKubernetes Secret / ConfigMap\n\u2193\nReloader detects change\n\u2193\nControlled workload rollout\n</code></pre> <p>Because the integration point is Kubernetes-native, many tools can work with Reloader. The difference lies in validation, guarantees, and support.</p>"},{"location":"integrations/index.html#support-validation-levels","title":"Support &amp; validation levels","text":"<p>Not all integrations are equal in terms of testing, guarantees, and support.</p> <p>To set clear expectations, Reloader uses the following support levels.</p>"},{"location":"integrations/index.html#validated-reloader-enterprise","title":"\ud83d\udfe2 Validated (Reloader Enterprise)","text":"<ul> <li>Continuously tested in CI</li> <li>Documented end-to-end workflows</li> <li>Validated across upgrades</li> <li>Known edge cases handled</li> <li>Covered by commercial support and SLA</li> </ul>"},{"location":"integrations/index.html#community","title":"\ud83d\udfe1 Community","text":"<ul> <li>Known to work in practice</li> <li>Community-contributed or best-effort docs</li> <li>No continuous validation or SLA</li> </ul>"},{"location":"integrations/index.html#experimental","title":"\ud83d\udd35 Experimental","text":"<ul> <li>Early-stage or limited validation</li> <li>Suitable for testing and experimentation</li> <li>Behavior may change between releases</li> </ul> <p>These labels are shown clearly on each integration page.</p>"},{"location":"integrations/index.html#integrations-support-matrix","title":"Integrations support matrix","text":"<p>The table below summarizes the current status of supported integrations.</p> Integration Support level HashiCorp Vault \ud83d\udfe2 Validated (Reloader Enterprise) OpenBao \ud83d\udfe2 Validated (Reloader Enterprise) Conjur \ud83d\udfe2 Validated (Reloader Enterprise) External Secrets Operator \ud83d\udfe1 Community Cert-Manager \ud83d\udfe1 Community Sealed Secrets \ud83d\udfe1 Community Secrets Store CSI Driver \ud83d\udfe1 Community <p>Community usage is possible for most integrations, but only integrations marked as \u201cValidated\u201d are continuously tested and supported.</p>"},{"location":"integrations/index.html#what-validated-means-in-practice","title":"What \u201cvalidated\u201d means in practice","text":"<p>For integrations marked as Validated (Reloader Enterprise), Stakater continuously verifies:</p> <ul> <li>Reload behavior under frequent secret rotation</li> <li>Compatibility with supported Kubernetes versions</li> <li>Interaction with GitOps workflows (e.g. Argo CD)</li> <li>Rollout safety and failure handling</li> <li>RBAC and security boundaries</li> <li>Upgrade and rollback scenarios</li> </ul> <p>This reduces operational risk for platform teams running Reloader in production-critical environments.</p>"},{"location":"integrations/conjur/index.html","title":"Overview","text":""},{"location":"integrations/conjur/index.html#conjur-integration","title":"Conjur Integration","text":"<p>\ud83d\udfe2 Support level This integration is validated and supported in Reloader Enterprise. Community usage is possible, but without continuous validation or SLA</p> <p>This guide shows how to automatically restart Kubernetes workloads when CyberArk Conjur secrets change using Stakater Reloader.</p>"},{"location":"integrations/conjur/index.html#integration-patterns","title":"Integration Patterns","text":"Pattern How Secrets Arrive Rotation Reloader Compatibility Guide External Secrets Operator ESO syncs to K8s Secret ESO refresh interval Best fit ESO Guide Sidecar Sidecar updates K8s Secret Sidecar refresh interval Best fit Sidecar Guide CSI Driver CSI mounts files + syncs to K8s Secret CSI rotation interval Works with secretObjects CSI Guide"},{"location":"integrations/conjur/index.html#architecture-overview","title":"Architecture Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Golden ConfigMap Architecture                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                              \u2502\n\u2502  Cluster Level (conjur namespace):                                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  conjur-config-cluster-prep (Helm Chart)                               \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                  \u2502 \u2502\n\u2502  \u2502  \u2502 Golden ConfigMap \u2502  Contains: CONJUR_ACCOUNT, CONJUR_APPLIANCE_URL, \u2502 \u2502\n\u2502  \u2502  \u2502 (conjur-configmap)\u2502           CONJUR_SSL_CERTIFICATE, etc.          \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                              \u2502                                               \u2502\n\u2502                              \u25bc                                               \u2502\n\u2502  Application Namespace:                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502  conjur-config-namespace-prep (Helm Chart)                             \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                  \u2502 \u2502\n\u2502  \u2502  \u2502 conjur-connect   \u2502  Copies connection info from Golden ConfigMap    \u2502 \u2502\n\u2502  \u2502  \u2502 ConfigMap        \u2502                                                  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                  \u2502 \u2502\n\u2502  \u2502           \u2502                                                            \u2502 \u2502\n\u2502  \u2502           \u25bc                                                            \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502  \u2502                    Application Pod                                \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u2502 App         \u2502         \u2502 Secrets Provider Sidecar           \u2502 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u2502 Container   \u2502         \u2502 - Reads from conjur-connect        \u2502 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u2502             \u2502         \u2502 - Authenticates via JWT            \u2502 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u2502             \u2502         \u2502 - Syncs secrets to K8s Secret      \u2502 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integrations/conjur/index.html#prerequisites","title":"Prerequisites","text":"<ul> <li>Kubernetes cluster (v1.19+)</li> <li>Helm v3+</li> <li>Conjur OSS or Enterprise</li> <li>Conjur CLI installed locally</li> <li>Stakater Reloader installed</li> <li>kubectl configured with cluster access</li> </ul>"},{"location":"integrations/conjur/index.html#install-stakater-reloader","title":"Install Stakater Reloader","text":"<pre><code>helm repo add stakater https://stakater.github.io/stakater-charts\nhelm install reloader stakater/reloader --namespace reloader --create-namespace\n</code></pre>"},{"location":"integrations/conjur/index.html#common-setup-steps","title":"Common Setup Steps","text":""},{"location":"integrations/conjur/index.html#step-1-install-conjur-oss","title":"Step 1: Install Conjur OSS","text":"<pre><code># Add CyberArk Helm repo\nhelm repo add cyberark https://cyberark.github.io/helm-charts\nhelm repo update\n\n# Create namespace\nkubectl create namespace conjur\n\n# Generate data key\nDATA_KEY=$(docker run --rm cyberark/conjur data-key generate)\n\n# Install Conjur with authn-jwt enabled\nhelm install conjur cyberark/conjur-oss -n conjur \\\n  --set account.name=myaccount \\\n  --set account.create=true \\\n  --set dataKey=\"$DATA_KEY\" \\\n  --set authenticators=\"authn\\,authn-jwt/dev\" \\\n  --set ssl.hostname=conjur-conjur-oss.conjur.svc.cluster.local \\\n  --wait --timeout 60s\n</code></pre>"},{"location":"integrations/conjur/index.html#step-2-configure-conjur-cli","title":"Step 2: Configure Conjur CLI","text":"<pre><code># Get admin API key\nADMIN_API_KEY=$(kubectl exec -n conjur deployment/conjur-conjur-oss -c conjur-oss -- \\\n  conjurctl role retrieve-key myaccount:user:admin)\n\n# Get the Conjur SSL certificate\nkubectl get secret -n conjur conjur-conjur-ssl-cert \\\n  -o jsonpath='{.data.tls\\.crt}' | base64 -d &gt; conjur.pem\n\n# Initialize Conjur CLI (assumes Conjur is accessible via port-forward or ingress)\n# Option 1: Port-forward for local access\nkubectl port-forward -n conjur svc/conjur-conjur-oss 8443:443 &amp;\n\n# Initialize and login\nconjur init \\\n  --url https://localhost:8443 \\\n  --account myaccount \\\n  --ca-cert conjur.pem \\\n  --force\n\nconjur login -i admin -p $ADMIN_API_KEY\n</code></pre>"},{"location":"integrations/conjur/index.html#step-3-install-golden-configmap-cluster-prep","title":"Step 3: Install Golden ConfigMap (Cluster Prep)","text":"<pre><code>CONJUR_SSL_CERT=$(kubectl get secret -n conjur conjur-conjur-ssl-cert \\\n  -o jsonpath='{.data.tls\\.crt}' | base64 -d)\n\nhelm install conjur-config-cluster cyberark/conjur-config-cluster-prep -n conjur \\\n  --set conjur.account=myaccount \\\n  --set conjur.applianceUrl=\"https://conjur-conjur-oss.conjur.svc.cluster.local\" \\\n  --set conjur.certificateBase64=\"$(echo -n \"$CONJUR_SSL_CERT\" | base64 -w0)\" \\\n  --set authnK8s.authenticatorID=dev \\\n  --set authnK8s.serviceAccount.create=false\n</code></pre>"},{"location":"integrations/conjur/index.html#how-reloader-works","title":"How Reloader Works","text":"<ol> <li>Secret Provider updates K8s Secret - Sidecar/ESO/CSI syncs secrets from Conjur</li> <li>Reloader detects change - Watches for Secret changes via Kubernetes API</li> <li>Pod restart triggered - Rolling restart of pods referencing the changed Secret</li> </ol>"},{"location":"integrations/conjur/index.html#reloader-annotations","title":"Reloader Annotations","text":"<p>On Deployment:</p> <pre><code>metadata:\n  annotations:\n    reloader.stakater.com/search: \"true\"\n</code></pre> <p>On Secret (must be annotation, not label):</p> <pre><code>metadata:\n  annotations:\n    reloader.stakater.com/match: \"true\"\n</code></pre>"},{"location":"integrations/conjur/index.html#pattern-specific-guides","title":"Pattern-Specific Guides","text":"<ul> <li>Sidecar Pattern</li> <li>CSI Driver Pattern</li> <li>ESO Pattern</li> </ul>"},{"location":"integrations/conjur/index.html#references","title":"References","text":"<ul> <li>Stakater Reloader</li> <li>CyberArk Conjur Documentation</li> <li>Conjur CLI Installation</li> <li>Conjur Config Cluster Prep</li> <li>Conjur Config Namespace Prep</li> </ul>"},{"location":"integrations/conjur/conjur-csi.html","title":"CSI Driver","text":""},{"location":"integrations/conjur/conjur-csi.html#how-to-use-reloader-with-conjur-csi-driver-pattern","title":"How to Use Reloader with Conjur CSI Driver Pattern","text":"<p>This guide explains how to set up CyberArk Conjur with the Secrets Store CSI Driver using JWT-based authentication (authn-jwt), combined with Stakater Reloader for automatic pod restarts when secrets change.</p>"},{"location":"integrations/conjur/conjur-csi.html#overview","title":"Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           Kubernetes Cluster                                 \u2502\n\u2502                                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                         Application Pod                                 \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502 \u2502\n\u2502  \u2502  \u2502  App Container                                                   \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502                                                                  \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502  - Reads secrets from env vars (K8s Secret)                     \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502  - Optionally reads secrets from mounted files                  \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502                                                                  \u2502   \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502 \u2502\n\u2502  \u2502                              \u2502                                          \u2502 \u2502\n\u2502  \u2502                              \u25bc                                          \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502 \u2502\n\u2502  \u2502  \u2502  CSI Volume Mount (/mnt/secrets)                                \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502  - username.txt                                                  \u2502   \u2502 \u2502\n\u2502  \u2502  \u2502  - password.txt                                                  \u2502   \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                      \u2502                                       \u2502\n\u2502            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502            \u25bc                         \u25bc                         \u25bc            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502  Conjur CSI      \u2502    \u2502   K8s Secret     \u2502    \u2502  Stakater        \u2502      \u2502\n\u2502  \u2502  Provider        \u2502\u2500\u2500\u2500\u25ba\u2502   (app-secrets)  \u2502\u2500\u2500\u2500\u25ba\u2502  Reloader        \u2502      \u2502\n\u2502  \u2502                  \u2502    \u2502                  \u2502    \u2502                  \u2502      \u2502\n\u2502  \u2502  - Authenticates \u2502    \u2502  annotation:     \u2502    \u2502  Watches secret  \u2502      \u2502\n\u2502  \u2502    via JWT       \u2502    \u2502  reloader.../    \u2502    \u2502  changes and     \u2502      \u2502\n\u2502  \u2502  - Fetches from  \u2502    \u2502  match: \"true\"   \u2502    \u2502  restarts pods   \u2502      \u2502\n\u2502  \u2502    Conjur        \u2502    \u2502                  \u2502    \u2502                  \u2502      \u2502\n\u2502  \u2502  - Syncs via     \u2502    \u2502  (secretObjects) \u2502    \u2502                  \u2502      \u2502\n\u2502  \u2502    secretObjects \u2502    \u2502                  \u2502    \u2502                  \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502            \u2502                                                                 \u2502\n\u2502            \u25bc                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                       \u2502\n\u2502  \u2502    Conjur        \u2502                                                       \u2502\n\u2502  \u2502    Server        \u2502                                                       \u2502\n\u2502  \u2502                  \u2502                                                       \u2502\n\u2502  \u2502  Stores secrets  \u2502                                                       \u2502\n\u2502  \u2502  Validates JWT   \u2502                                                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#prerequisites","title":"Prerequisites","text":"<p>Complete the common setup steps from the Overview: - Conjur OSS installed - Conjur CLI configured - Golden ConfigMap (cluster-prep) installed</p> <p>Additionally required: - Secrets Store CSI Driver installed with <code>syncSecret.enabled=true</code> - CyberArk Conjur CSI Provider installed</p>"},{"location":"integrations/conjur/conjur-csi.html#install-secrets-store-csi-driver","title":"Install Secrets Store CSI Driver","text":"<pre><code>helm repo add secrets-store-csi-driver https://kubernetes-sigs.github.io/secrets-store-csi-driver/charts\nhelm install csi-secrets-store secrets-store-csi-driver/secrets-store-csi-driver \\\n  --namespace kube-system \\\n  --set syncSecret.enabled=true \\\n  --set enableSecretRotation=true \\\n  --set rotationPollInterval=30s \\\n  --set tokenRequests[0].audience=\"conjur\"\n</code></pre> <p>Important: The <code>tokenRequests[0].audience=\"conjur\"</code> is required for JWT authentication with Conjur CSI Provider.</p>"},{"location":"integrations/conjur/conjur-csi.html#install-conjur-csi-provider","title":"Install Conjur CSI Provider","text":"<pre><code>helm repo add cyberark https://cyberark.github.io/helm-charts\nhelm install conjur-csi-provider cyberark/conjur-k8s-csi-provider \\\n  --namespace kube-system\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-1-load-conjur-policies","title":"Step 1: Load Conjur Policies","text":"<p>Create <code>conjur-policy.yaml</code>:</p> <pre><code># JWT Authenticator Configuration\n- !policy\n  id: conjur/authn-jwt/dev\n  body:\n    - !webservice\n    - !group apps\n    - !permit\n      role: !group apps\n      privilege: [ read, authenticate ]\n      resource: !webservice\n    # Use public-keys instead of jwks-uri\n    - !variable public-keys\n    - !variable issuer\n    - !variable token-app-property\n    - !variable identity-path\n    - !variable audience\n\n# Application Secrets\n- !policy\n  id: secrets\n  body:\n    - !group consumers\n    - &amp;variables\n      - !variable username\n      - !variable password\n    - !permit\n      role: !group consumers\n      privilege: [ read, execute ]\n      resource: *variables\n\n# Host Identity for CSI test app\n- !policy\n  id: jwt-apps\n  body:\n    - !host\n      id: system:serviceaccount:csi-test-app:csi-test-app-sa\n      annotations:\n        authn-jwt/dev/sub: system:serviceaccount:csi-test-app:csi-test-app-sa\n\n# Grant Host to JWT Authenticator Group\n- !grant\n  role: !group conjur/authn-jwt/dev/apps\n  member: !host jwt-apps/system:serviceaccount:csi-test-app:csi-test-app-sa\n\n# Grant Host Access to Secrets\n- !grant\n  role: !group secrets/consumers\n  member: !host jwt-apps/system:serviceaccount:csi-test-app:csi-test-app-sa\n</code></pre> <p>Load the policy:</p> <pre><code>conjur policy load -b root -f conjur-policy.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-2-configure-jwt-authenticator-variables","title":"Step 2: Configure JWT Authenticator Variables","text":"<p>Important: Use <code>public-keys</code> instead of <code>jwks-uri</code>. The <code>jwks-uri</code> approach fails because Conjur cannot reach the Kubernetes API server due to SSL certificate issues.</p> <p>Important: For CSI Provider, the audience must be <code>\"conjur\"</code> (not the Conjur URL).</p> <p>Note: Using <code>jq</code> to format the public-keys JSON ensures proper quoting. Malformed JSON (missing quotes around keys) will cause JWT authentication to fail with 401 errors.</p> <pre><code># Get Kubernetes JWKS public keys and format as proper JSON\nkubectl get --raw /openid/v1/jwks &gt; /tmp/jwks.json\njq -n --slurpfile jwks /tmp/jwks.json '{\"type\":\"jwks\",\"value\":$jwks[0]}' &gt; /tmp/public-keys.json\n\n# Set public-keys from file (ensures proper JSON formatting)\nconjur variable set -i conjur/authn-jwt/dev/public-keys -v \"$(cat /tmp/public-keys.json)\"\n\n# Set issuer\nconjur variable set -i conjur/authn-jwt/dev/issuer \\\n  -v \"https://kubernetes.default.svc.cluster.local\"\n\n# Set token-app-property\nconjur variable set -i conjur/authn-jwt/dev/token-app-property -v \"sub\"\n\n# Set identity-path\nconjur variable set -i conjur/authn-jwt/dev/identity-path -v \"jwt-apps\"\n\n# Set audience - MUST be \"conjur\" for CSI Provider\nconjur variable set -i conjur/authn-jwt/dev/audience -v \"conjur\"\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-3-set-application-secrets","title":"Step 3: Set Application Secrets","text":"<pre><code>conjur variable set -i secrets/username -v \"admin-user\"\n\nconjur variable set -i secrets/password -v \"super-secret-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-4-create-application-namespace","title":"Step 4: Create Application Namespace","text":"<pre><code>kubectl create namespace csi-test-app\nkubectl create serviceaccount csi-test-app-sa -n csi-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-5-install-namespace-prep","title":"Step 5: Install Namespace Prep","text":"<pre><code>helm install conjur-config-namespace-prep cyberark/conjur-config-namespace-prep \\\n  --namespace csi-test-app \\\n  --set authnK8s.goldenConfigMap=\"conjur-configmap\" \\\n  --set authnK8s.namespace=\"conjur\"\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-6-create-secretproviderclass","title":"Step 6: Create SecretProviderClass","text":"<p>Create <code>secret-provider-class.yaml</code>:</p> <pre><code>apiVersion: secrets-store.csi.x-k8s.io/v1\nkind: SecretProviderClass\nmetadata:\n  name: conjur-secrets\n  namespace: csi-test-app\nspec:\n  provider: conjur\n  # Sync to Kubernetes Secret - Required for Reloader integration\n  secretObjects:\n    - secretName: app-secrets\n      type: Opaque\n      annotations:\n        reloader.stakater.com/match: \"true\"\n      data:\n        - key: username\n          objectName: username.txt\n        - key: password\n          objectName: password.txt\n  parameters:\n    # IMPORTANT: Use version 0.2.0 - secrets mapping is done via pod annotations\n    conjur.org/configurationVersion: \"0.2.0\"\n    account: myaccount\n    applianceUrl: \"https://conjur-conjur-oss.conjur.svc.cluster.local\"\n    authnId: authn-jwt/dev\n    # Get SSL certificate from conjur-connect configmap\n    sslCertificate: |\n      -----BEGIN CERTIFICATE-----\n      &lt;your-conjur-ssl-certificate-here&gt;\n      -----END CERTIFICATE-----\n</code></pre> <p>Note: Get the SSL certificate from: </p><pre><code>kubectl get configmap conjur-connect -n csi-test-app -o jsonpath='{.data.CONJUR_SSL_CERTIFICATE}'\n</code></pre><p></p> <p>Apply:</p> <pre><code>kubectl apply -f secret-provider-class.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-7-deploy-application","title":"Step 7: Deploy Application","text":"<p>Create <code>deployment.yaml</code>:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: csi-test-app\n  namespace: csi-test-app\n  annotations:\n    reloader.stakater.com/search: \"true\"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: csi-test-app\n  template:\n    metadata:\n      labels:\n        app: csi-test-app\n      annotations:\n        # REQUIRED: Map Conjur secrets to files in the CSI volume\n        # Format: - &lt;filename&gt;: &lt;conjur-variable-path&gt;\n        conjur.org/secrets: |\n          - username.txt: secrets/username\n          - password.txt: secrets/password\n    spec:\n      serviceAccountName: csi-test-app-sa\n      containers:\n        - name: app\n          image: busybox:latest\n          command:\n            - \"sh\"\n            - \"-c\"\n            - |\n              while true; do\n                echo \"Username: $APP_USERNAME\"\n                echo \"Password: $APP_PASSWORD\"\n                sleep 30\n              done\n          # Reference secrets from K8s Secret (required for Reloader)\n          env:\n            - name: APP_USERNAME\n              valueFrom:\n                secretKeyRef:\n                  name: app-secrets\n                  key: username\n            - name: APP_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: app-secrets\n                  key: password\n          # CSI volume mount required to trigger secret sync\n          volumeMounts:\n            - name: conjur-secrets\n              mountPath: /mnt/secrets\n              readOnly: true\n      volumes:\n        - name: conjur-secrets\n          csi:\n            driver: secrets-store.csi.k8s.io\n            readOnly: true\n            volumeAttributes:\n              secretProviderClass: conjur-secrets\n</code></pre> <p>Apply:</p> <pre><code>kubectl apply -f deployment.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-8-verify-the-setup","title":"Step 8: Verify the Setup","text":""},{"location":"integrations/conjur/conjur-csi.html#check-pod-status","title":"Check Pod Status","text":"<pre><code>kubectl get pods -n csi-test-app\n</code></pre> <p>Pod should be Running.</p>"},{"location":"integrations/conjur/conjur-csi.html#check-secretproviderclasspodstatus","title":"Check SecretProviderClassPodStatus","text":"<pre><code>kubectl get secretproviderclasspodstatuses -n csi-test-app\n</code></pre> <p>Verify <code>mounted: true</code> in the status.</p>"},{"location":"integrations/conjur/conjur-csi.html#verify-secrets-are-populated","title":"Verify Secrets are Populated","text":"<pre><code># Check K8s Secret was created\nkubectl get secret app-secrets -n csi-test-app -o jsonpath='{.data.password}' | base64 -d\n\n# Check app logs\nkubectl logs -n csi-test-app -l app=csi-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#step-9-test-secret-rotation","title":"Step 9: Test Secret Rotation","text":""},{"location":"integrations/conjur/conjur-csi.html#update-secret-in-conjur","title":"Update Secret in Conjur","text":"<pre><code>conjur variable set -i secrets/password -v \"new-rotated-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#wait-and-verify","title":"Wait and Verify","text":"<p>Wait 30-60 seconds for CSI rotation and Reloader restart:</p> <pre><code># Check secret was updated\nkubectl get secret app-secrets -n csi-test-app -o jsonpath='{.data.password}' | base64 -d\n\n# Check pod was restarted (new pod name)\nkubectl get pods -n csi-test-app -l app=csi-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#key-configuration-points","title":"Key Configuration Points","text":""},{"location":"integrations/conjur/conjur-csi.html#secretproviderclass-configuration-v020","title":"SecretProviderClass Configuration (v0.2.0)","text":"Field Description <code>conjur.org/configurationVersion</code> Must be <code>\"0.2.0\"</code> for pod annotation-based secrets mapping <code>account</code> Conjur account name <code>applianceUrl</code> Conjur server URL <code>authnId</code> JWT authenticator ID (e.g., <code>authn-jwt/dev</code>) <code>sslCertificate</code> Conjur SSL certificate (PEM format) <p>Note: In v0.2.0, the <code>identity</code> field is NOT used. Identity is derived from the JWT token automatically.</p>"},{"location":"integrations/conjur/conjur-csi.html#pod-annotations","title":"Pod Annotations","text":"<p>The pod must have the <code>conjur.org/secrets</code> annotation to map Conjur variables to files:</p> <pre><code>annotations:\n  conjur.org/secrets: |\n    - username.txt: secrets/username\n    - password.txt: secrets/password\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#secretobjects-configuration","title":"secretObjects Configuration","text":"<p>The <code>secretObjects</code> field syncs mounted secrets to a Kubernetes Secret:</p> <pre><code>secretObjects:\n  - secretName: app-secrets\n    type: Opaque\n    annotations:\n      reloader.stakater.com/match: \"true\"\n    data:\n      - key: username\n        objectName: username.txt  # Must match filename in conjur.org/secrets\n      - key: password\n        objectName: password.txt\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#csi-driver-token-configuration","title":"CSI Driver Token Configuration","text":"<p>The CSI Driver must be installed with <code>tokenRequests</code> for JWT authentication:</p> <pre><code>helm install csi-secrets-store ... \\\n  --set tokenRequests[0].audience=\"conjur\"\n</code></pre>"},{"location":"integrations/conjur/conjur-csi.html#reloader-annotations","title":"Reloader Annotations","text":"Resource Annotation Deployment <code>reloader.stakater.com/search: \"true\"</code> Secret <code>reloader.stakater.com/match: \"true\"</code> (via secretObjects)"},{"location":"integrations/conjur/conjur-csi.html#why-csi-volume-mount-is-required","title":"Why CSI Volume Mount is Required","text":"<p>Even if your app only uses environment variables from the K8s Secret, the CSI volume must be mounted because: 1. The CSI driver only syncs secrets when a pod mounts the volume 2. Without the mount, the K8s Secret (secretObjects) won't be created</p>"},{"location":"integrations/conjur/conjur-eso.html","title":"External Secrets Operator","text":""},{"location":"integrations/conjur/conjur-eso.html#how-to-use-reloader-with-conjur-external-secrets-operator-pattern","title":"How to Use Reloader with Conjur External Secrets Operator Pattern","text":"<p>This guide explains how to set up CyberArk Conjur with the External Secrets Operator (ESO), combined with Stakater Reloader for automatic pod restarts when secrets change.</p>"},{"location":"integrations/conjur/conjur-eso.html#authentication-options","title":"Authentication Options","text":"<p>ESO supports two authentication methods with Conjur:</p> Method Description Use Case API Key Uses a Conjur host ID and API key stored in a K8s Secret Simpler setup, good for development JWT Uses Kubernetes ServiceAccount tokens for authentication More secure, no static credentials, recommended for production <p>Choose the authentication method that best fits your security requirements and proceed to the corresponding section.</p>"},{"location":"integrations/conjur/conjur-eso.html#overview","title":"Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           Kubernetes Cluster                                 \u2502\n\u2502                                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                    External Secrets Operator                            \u2502 \u2502\n\u2502  \u2502                                                                         \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502  SecretStore    \u2502         \u2502  ExternalSecret                      \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502                 \u2502         \u2502                                      \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  - Conjur URL   \u2502         \u2502  - refreshInterval: 30s              \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  - Auth Method  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502  - Maps Conjur vars to K8s Secret    \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  - CA Bundle    \u2502         \u2502  - Adds Reloader annotation          \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502                 \u2502         \u2502                                      \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                      \u2502                                       \u2502\n\u2502                                      \u25bc                                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502   K8s Secret     \u2502    \u2502  Stakater        \u2502    \u2502  Application     \u2502       \u2502\n\u2502  \u2502   (app-secrets)  \u2502\u2500\u2500\u2500\u25ba\u2502  Reloader        \u2502\u2500\u2500\u2500\u25ba\u2502  Pod             \u2502       \u2502\n\u2502  \u2502                  \u2502    \u2502                  \u2502    \u2502                  \u2502       \u2502\n\u2502  \u2502  annotation:     \u2502    \u2502  Watches secret  \u2502    \u2502  Reads secrets   \u2502       \u2502\n\u2502  \u2502  reloader.../    \u2502    \u2502  changes and     \u2502    \u2502  from env vars   \u2502       \u2502\n\u2502  \u2502  match: \"true\"   \u2502    \u2502  restarts pods   \u2502    \u2502                  \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502            \u25b2                                                                 \u2502\n\u2502            \u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                                       \u2502\n\u2502  \u2502    Conjur        \u2502                                                       \u2502\n\u2502  \u2502    Server        \u2502                                                       \u2502\n\u2502  \u2502                  \u2502                                                       \u2502\n\u2502  \u2502  Stores secrets  \u2502                                                       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#prerequisites","title":"Prerequisites","text":"<p>Complete the common setup steps from the Overview: - Conjur OSS installed - Conjur CLI configured - Stakater Reloader installed</p> <p>Additionally required: - External Secrets Operator installed</p>"},{"location":"integrations/conjur/conjur-eso.html#install-external-secrets-operator","title":"Install External Secrets Operator","text":"<pre><code>helm repo add external-secrets https://charts.external-secrets.io\nhelm repo update\nhelm install external-secrets external-secrets/external-secrets \\\n  --namespace external-secrets \\\n  --create-namespace \\\n  --wait\n</code></pre> <p>Verify installation:</p> <pre><code>kubectl get pods -n external-secrets\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#option-1-api-key-authentication","title":"Option 1: API Key Authentication","text":"<p>This section covers setting up ESO with API key authentication. This method stores a Conjur host ID and API key in a Kubernetes Secret.</p>"},{"location":"integrations/conjur/conjur-eso.html#api-key-step-1-load-conjur-policy","title":"API Key: Step 1 - Load Conjur Policy","text":"<p>Create <code>conjur-policy.yaml</code>:</p> <pre><code># Conjur Policy for External Secrets Operator (API Key Authentication)\n\n# Application Secrets\n- !policy\n  id: secrets\n  body:\n    - !group consumers\n    - &amp;variables\n      - !variable username\n      - !variable password\n    - !permit\n      role: !group consumers\n      privilege: [ read, execute ]\n      resource: *variables\n\n# Host Identity for External Secrets Operator\n- !policy\n  id: apps\n  body:\n    - !host external-secrets\n\n# Grant Host Access to Secrets\n- !grant\n  role: !group secrets/consumers\n  member: !host apps/external-secrets\n</code></pre> <p>Load the policy and capture the API key:</p> <pre><code>conjur policy load -b root -f conjur-policy.yaml\n</code></pre> <p>Important: Save the <code>api_key</code> from the output. You'll need it later.</p> <p>Example output: </p><pre><code>{\n  \"created_roles\": {\n    \"myaccount:host:apps/external-secrets\": {\n      \"id\": \"myaccount:host:apps/external-secrets\",\n      \"api_key\": \"3d37q6ph0h2ah3wssa983b1n0gsk8v1hv3b2b74vk7ztmg2b9c992\"\n    }\n  },\n  \"version\": 1\n}\n</code></pre><p></p>"},{"location":"integrations/conjur/conjur-eso.html#api-key-step-2-set-application-secrets","title":"API Key: Step 2 - Set Application Secrets","text":"<pre><code>conjur variable set -i secrets/username -v \"admin-user\"\n\nconjur variable set -i secrets/password -v \"super-secret-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#api-key-step-3-create-application-namespace-and-credentials","title":"API Key: Step 3 - Create Application Namespace and Credentials","text":"<pre><code># Create namespace\nkubectl create namespace eso-test-app\n\n# Create Conjur credentials secret for ESO\n# Replace &lt;API_KEY&gt; with the API key from Step 1\nkubectl create secret generic conjur-credentials -n eso-test-app \\\n  --from-literal=hostId=\"host/apps/external-secrets\" \\\n  --from-literal=apikey=\"&lt;API_KEY&gt;\"\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#api-key-step-4-get-conjur-ca-certificate","title":"API Key: Step 4 - Get Conjur CA Certificate","text":"<p>Note: The <code>caBundle</code> field is only required if Conjur uses a self-signed or private SSL certificate. If Conjur uses a publicly trusted SSL certificate, you can omit the <code>caBundle</code> field from the SecretStore configuration.</p> <pre><code># Get base64-encoded CA certificate (only needed for self-signed/private certificates)\nkubectl get secret conjur-conjur-ssl-cert -n conjur -o jsonpath='{.data.tls\\.crt}'\n</code></pre> <p>Save this value for the SecretStore configuration.</p>"},{"location":"integrations/conjur/conjur-eso.html#api-key-step-5-create-secretstore","title":"API Key: Step 5 - Create SecretStore","text":"<p>Create <code>secret-store.yaml</code>:</p> <pre><code>apiVersion: external-secrets.io/v1\nkind: SecretStore\nmetadata:\n  name: conjur-secret-store\n  namespace: eso-test-app\nspec:\n  provider:\n    conjur:\n      url: https://conjur-conjur-oss.conjur.svc.cluster.local\n      # Paste the base64-encoded CA certificate from Step 4\n      caBundle: &lt;BASE64_ENCODED_CA_CERTIFICATE&gt;\n      auth:\n        apikey:\n          account: myaccount\n          userRef:\n            name: conjur-credentials\n            key: hostId\n          apiKeyRef:\n            name: conjur-credentials\n            key: apikey\n</code></pre> <p>Apply and verify:</p> <pre><code>kubectl apply -f secret-store.yaml\nkubectl get secretstore -n eso-test-app\n</code></pre> <p>Should show <code>STATUS: Valid</code> and <code>READY: True</code>.</p> <p>Now proceed to Create ExternalSecret section.</p>"},{"location":"integrations/conjur/conjur-eso.html#option-2-jwt-authentication","title":"Option 2: JWT Authentication","text":"<p>This section covers setting up ESO with JWT authentication. This method uses Kubernetes ServiceAccount tokens to authenticate with Conjur - no static credentials required.</p>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-1-configure-jwt-authenticator-in-conjur","title":"JWT: Step 1 - Configure JWT Authenticator in Conjur","text":"<p>First, load the Conjur policy that configures the JWT authenticator and creates a host identity.</p> <p>Create <code>conjur-policy.yaml</code>:</p> <pre><code># Conjur Policy for External Secrets Operator (JWT Authentication)\n\n# Application Secrets\n- !policy\n  id: secrets\n  body:\n    - !group consumers\n    - &amp;variables\n      - !variable username\n      - !variable password\n    - !permit\n      role: !group consumers\n      privilege: [ read, execute ]\n      resource: *variables\n\n# JWT Authenticator Configuration for authn-jwt/dev\n- !policy\n  id: conjur/authn-jwt/dev\n  body:\n    - !webservice\n\n    # JWT validation variables\n    - !variable public-keys\n    - !variable issuer\n    - !variable token-app-property\n    - !variable identity-path\n    - !variable audience\n\n    # Group for apps that can authenticate\n    - !group apps\n\n    - !permit\n      role: !group apps\n      privilege: [ authenticate ]\n      resource: !webservice\n\n    - !webservice status\n\n# Host identities for JWT authentication\n# Identity path is 'jwt-apps', so hosts are defined under this policy\n- !policy\n  id: jwt-apps\n  body:\n    # Host for ESO service account\n    # Format: system:serviceaccount:&lt;namespace&gt;:&lt;serviceaccount-name&gt;\n    - !host\n      id: system:serviceaccount:eso-jwt-test:eso-jwt-sa\n      annotations:\n        authn-jwt/dev/sub: system:serviceaccount:eso-jwt-test:eso-jwt-sa\n\n# Grant host to authenticator group\n- !grant\n  role: !group conjur/authn-jwt/dev/apps\n  member: !host jwt-apps/system:serviceaccount:eso-jwt-test:eso-jwt-sa\n\n# Grant access to secrets\n- !grant\n  role: !group secrets/consumers\n  member: !host jwt-apps/system:serviceaccount:eso-jwt-test:eso-jwt-sa\n</code></pre> <p>Load the policy:</p> <pre><code>conjur policy load -b root -f conjur-policy.yaml  \n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-2-configure-jwt-authenticator-variables","title":"JWT: Step 2 - Configure JWT Authenticator Variables","text":"<p>Set the JWT authenticator variables:</p> <pre><code># Get Kubernetes JWKS public keys and format as proper JSON\nkubectl get --raw /openid/v1/jwks &gt; /tmp/jwks.json\njq -n --slurpfile jwks /tmp/jwks.json '{\"type\":\"jwks\",\"value\":$jwks[0]}' &gt; /tmp/public-keys.json\n\n# Set public-keys from file (ensures proper JSON formatting)\nconjur variable set -i conjur/authn-jwt/dev/public-keys -v \"$(cat /tmp/public-keys.json)\"\n\nconjur variable set -i conjur/authn-jwt/dev/issuer -v \"https://kubernetes.default.svc.cluster.local\"\n\nconjur variable set -i conjur/authn-jwt/dev/token-app-property -v \"sub\"\n\nconjur variable set -i conjur/authn-jwt/dev/identity-path -v \"jwt-apps\"\n\nconjur variable set -i conjur/authn-jwt/dev/audience -v \"https://conjur-conjur-oss.conjur.svc.cluster.local\"\n</code></pre> <p>Note: Using <code>jq</code> to format the public-keys JSON ensures proper quoting. Malformed JSON (missing quotes around keys) will cause JWT authentication to fail with 401 errors.</p>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-3-set-application-secrets","title":"JWT: Step 3 - Set Application Secrets","text":"<pre><code>conjur variable set -i secrets/username -v \"admin-user\"\n\nconjur variable set -i secrets/password -v \"super-secret-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-4-create-application-namespace-and-serviceaccount","title":"JWT: Step 4 - Create Application Namespace and ServiceAccount","text":"<pre><code># Create namespace\nkubectl create namespace eso-jwt-test\n\n# Create service account for ESO to use\nkubectl create serviceaccount eso-jwt-sa -n eso-jwt-test\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-5-get-conjur-ca-certificate","title":"JWT: Step 5 - Get Conjur CA Certificate","text":"<p>Note: The <code>caBundle</code> field is only required if Conjur uses a self-signed or private SSL certificate. If Conjur uses a publicly trusted SSL certificate, you can omit the <code>caBundle</code> field from the SecretStore configuration.</p> <pre><code># Get base64-encoded CA certificate (only needed for self-signed/private certificates)\nkubectl get secret conjur-conjur-ssl-cert -n conjur -o jsonpath='{.data.tls\\.crt}'\n</code></pre> <p>Save this value for the SecretStore configuration.</p>"},{"location":"integrations/conjur/conjur-eso.html#jwt-step-6-create-secretstore-with-jwt-auth","title":"JWT: Step 6 - Create SecretStore with JWT Auth","text":"<p>Create <code>secret-store.yaml</code>:</p> <pre><code>apiVersion: external-secrets.io/v1\nkind: SecretStore\nmetadata:\n  name: conjur-jwt-secret-store\n  namespace: eso-jwt-test\nspec:\n  provider:\n    conjur:\n      url: https://conjur-conjur-oss.conjur.svc.cluster.local\n      # Paste the base64-encoded CA certificate from Step 5\n      caBundle: &lt;BASE64_ENCODED_CA_CERTIFICATE&gt;\n      auth:\n        jwt:\n          account: myaccount\n          serviceID: dev\n          serviceAccountRef:\n            name: eso-jwt-sa\n            audiences:\n              - https://conjur-conjur-oss.conjur.svc.cluster.local\n</code></pre> <p>Apply and verify:</p> <pre><code>kubectl apply -f secret-store.yaml\nkubectl get secretstore -n eso-jwt-test\n</code></pre> <p>Should show <code>STATUS: Valid</code> and <code>READY: True</code>.</p> <p>Now proceed to Create ExternalSecret section.</p>"},{"location":"integrations/conjur/conjur-eso.html#common-configuration","title":"Common Configuration","text":"<p>The following sections apply to both authentication methods. Adjust the namespace name based on your chosen method: - API Key: <code>eso-test-app</code> - JWT: <code>eso-jwt-test</code></p>"},{"location":"integrations/conjur/conjur-eso.html#create-externalsecret","title":"Create ExternalSecret","text":"<p>Create <code>external-secret.yaml</code>:</p> <pre><code>apiVersion: external-secrets.io/v1\nkind: ExternalSecret\nmetadata:\n  name: app-secrets\n  namespace: &lt;NAMESPACE&gt;  # eso-test-app or eso-jwt-test\nspec:\n  refreshInterval: 30s\n  secretStoreRef:\n    name: &lt;SECRET_STORE_NAME&gt;  # conjur-secret-store or conjur-jwt-secret-store\n    kind: SecretStore\n  target:\n    name: app-secrets\n    creationPolicy: Owner\n    template:\n      metadata:\n        annotations:\n          # Reloader annotation - triggers restart on workloads with search: \"true\"\n          reloader.stakater.com/match: \"true\"\n  data:\n    - secretKey: username\n      remoteRef:\n        key: secrets/username\n    - secretKey: password\n      remoteRef:\n        key: secrets/password\n</code></pre> <p>Apply and verify:</p> <pre><code>kubectl apply -f external-secret.yaml\nkubectl get externalsecret -n &lt;NAMESPACE&gt;\n</code></pre> <p>Should show <code>STATUS: SecretSynced</code> and <code>READY: True</code>.</p>"},{"location":"integrations/conjur/conjur-eso.html#deploy-application","title":"Deploy Application","text":"<p>Create <code>deployment.yaml</code>:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: eso-test-app\n  namespace: &lt;NAMESPACE&gt;  # eso-test-app or eso-jwt-test\n  annotations:\n    reloader.stakater.com/search: \"true\"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: eso-test-app\n  template:\n    metadata:\n      labels:\n        app: eso-test-app\n    spec:\n      containers:\n        - name: app\n          image: busybox:latest\n          command:\n            - \"sh\"\n            - \"-c\"\n            - |\n              while true; do\n                echo \"Username: $APP_USERNAME\"\n                echo \"Password: $APP_PASSWORD\"\n                sleep 30\n              done\n          env:\n            - name: APP_USERNAME\n              valueFrom:\n                secretKeyRef:\n                  name: app-secrets\n                  key: username\n            - name: APP_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: app-secrets\n                  key: password\n</code></pre> <p>Apply:</p> <pre><code>kubectl apply -f deployment.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#verify-the-setup","title":"Verify the Setup","text":"<pre><code># SecretStore\nkubectl get secretstore -n &lt;NAMESPACE&gt;\n\n# ExternalSecret\nkubectl get externalsecret -n &lt;NAMESPACE&gt;\n\n# Secret (created by ESO)\nkubectl get secret app-secrets -n &lt;NAMESPACE&gt;\n\n# Pod\nkubectl get pods -n &lt;NAMESPACE&gt;\n\n# Verify secret contents\nkubectl get secret app-secrets -n &lt;NAMESPACE&gt; -o jsonpath='{.data.password}' | base64 -d\n\n# Check app logs\nkubectl logs -n &lt;NAMESPACE&gt; -l app=eso-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#test-secret-rotation","title":"Test Secret Rotation","text":""},{"location":"integrations/conjur/conjur-eso.html#update-secret-in-conjur","title":"Update Secret in Conjur","text":"<pre><code>conjur variable set -i secrets/password -v \"new-rotated-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#wait-and-verify","title":"Wait and Verify","text":"<p>Wait 30-60 seconds for ESO refresh and Reloader restart:</p> <pre><code># Check secret was updated\nkubectl get secret app-secrets -n &lt;NAMESPACE&gt; -o jsonpath='{.data.password}' | base64 -d\n\n# Check pod was restarted (new pod name)\nkubectl get pods -n &lt;NAMESPACE&gt; -l app=eso-test-app\n\n# Check app logs show new password\nkubectl logs -n &lt;NAMESPACE&gt; -l app=eso-test-app --tail=5\n</code></pre>"},{"location":"integrations/conjur/conjur-eso.html#configuration-reference","title":"Configuration Reference","text":""},{"location":"integrations/conjur/conjur-eso.html#secretstore-configuration","title":"SecretStore Configuration","text":""},{"location":"integrations/conjur/conjur-eso.html#api-key-authentication","title":"API Key Authentication","text":"Field Description <code>url</code> Conjur server URL <code>caBundle</code> Base64-encoded CA certificate for SSL (optional if using publicly trusted certificate) <code>auth.apikey.account</code> Conjur account name <code>auth.apikey.userRef</code> Reference to K8s secret containing host ID <code>auth.apikey.apiKeyRef</code> Reference to K8s secret containing API key"},{"location":"integrations/conjur/conjur-eso.html#jwt-authentication","title":"JWT Authentication","text":"Field Description <code>url</code> Conjur server URL <code>caBundle</code> Base64-encoded CA certificate for SSL (optional if using publicly trusted certificate) <code>auth.jwt.account</code> Conjur account name <code>auth.jwt.serviceID</code> JWT authenticator service ID (e.g., <code>dev</code> for <code>authn-jwt/dev</code>) <code>auth.jwt.serviceAccountRef.name</code> Kubernetes ServiceAccount name <code>auth.jwt.serviceAccountRef.audiences</code> JWT audience values (should match Conjur's audience variable)"},{"location":"integrations/conjur/conjur-eso.html#jwt-authenticator-variables","title":"JWT Authenticator Variables","text":"Variable Description Example Value <code>public-keys</code> JWKS for token validation <code>{\"type\":\"jwks\",\"value\":{...}}</code> <code>issuer</code> Expected JWT issuer claim <code>https://kubernetes.default.svc.cluster.local</code> <code>token-app-property</code> JWT claim for identity <code>sub</code> <code>identity-path</code> Conjur policy path for hosts <code>jwt-apps</code> <code>audience</code> Expected JWT audience claim Conjur URL"},{"location":"integrations/conjur/conjur-eso.html#externalsecret-configuration","title":"ExternalSecret Configuration","text":"Field Description <code>refreshInterval</code> How often ESO syncs secrets from Conjur (e.g., <code>30s</code>) <code>secretStoreRef</code> Reference to the SecretStore <code>target.name</code> Name of the K8s Secret to create <code>target.template.metadata.annotations</code> Annotations to add to the created Secret <code>data[].secretKey</code> Key name in the K8s Secret <code>data[].remoteRef.key</code> Variable path in Conjur"},{"location":"integrations/conjur/conjur-eso.html#reloader-annotations","title":"Reloader Annotations","text":"Resource Annotation Deployment <code>reloader.stakater.com/search: \"true\"</code> Secret (via ExternalSecret template) <code>reloader.stakater.com/match: \"true\"</code>"},{"location":"integrations/conjur/conjur-eso.html#comparison-api-key-vs-jwt-authentication","title":"Comparison: API Key vs JWT Authentication","text":"Aspect API Key JWT Credentials Static API key stored in K8s Secret Dynamic tokens from ServiceAccount Security Key rotation requires manual update No static secrets, tokens auto-rotate Setup Complexity Simpler Requires JWT authenticator configuration Conjur Policy Host with API key Host with JWT claim annotations Best For Development, simple setups Production, security-conscious environments"},{"location":"integrations/conjur/conjur-sidecar.html","title":"Sidecar","text":""},{"location":"integrations/conjur/conjur-sidecar.html#how-to-use-reloader-with-conjur-jwt-sidecar-pattern","title":"How to Use Reloader with Conjur JWT Sidecar Pattern","text":"<p>This guide explains how to set up CyberArk Conjur with the Secrets Provider sidecar pattern using JWT-based authentication (authn-jwt), combined with Stakater Reloader for automatic pod restarts when secrets change.</p>"},{"location":"integrations/conjur/conjur-sidecar.html#overview","title":"Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           Kubernetes Cluster                             \u2502\n\u2502                                                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502                         Application Pod                             \u2502 \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502 \u2502\n\u2502  \u2502  \u2502  App Container  \u2502         \u2502  Secrets Provider Sidecar        \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502                 \u2502         \u2502                                  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  Reads secrets  \u2502         \u2502  1. Gets projected SA JWT token  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  from K8s       \u2502         \u2502  2. Authenticates via authn-jwt  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502  Secret         \u2502         \u2502  3. Fetches secrets from Conjur  \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502                 \u2502         \u2502  4. Updates K8s Secret           \u2502  \u2502 \u2502\n\u2502  \u2502  \u2502                 \u2502         \u2502  5. Refreshes every 30s          \u2502  \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                      \u2502                                   \u2502\n\u2502                                      \u25bc                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502   K8s Secret     \u2502    \u2502  Stakater        \u2502    \u2502    Conjur        \u2502   \u2502\n\u2502  \u2502   (app-secrets)  \u2502\u25c4\u2500\u2500\u2500\u2502  Reloader        \u2502    \u2502    Server        \u2502   \u2502\n\u2502  \u2502                  \u2502    \u2502                  \u2502    \u2502                  \u2502   \u2502\n\u2502  \u2502  annotation:     \u2502    \u2502  Watches secret  \u2502    \u2502  Stores secrets  \u2502   \u2502\n\u2502  \u2502  reloader.../    \u2502    \u2502  changes and     \u2502    \u2502  Validates JWT   \u2502   \u2502\n\u2502  \u2502  match: \"true\"   \u2502    \u2502  restarts pods   \u2502    \u2502  tokens          \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#prerequisites","title":"Prerequisites","text":"<p>Complete the common setup steps from the Overview: - Conjur OSS installed - Conjur CLI configured - Golden ConfigMap (cluster-prep) installed</p>"},{"location":"integrations/conjur/conjur-sidecar.html#step-1-load-conjur-policies","title":"Step 1: Load Conjur Policies","text":"<p>Create <code>conjur-policy.yaml</code>:</p> <pre><code># JWT Authenticator Configuration\n- !policy\n  id: conjur/authn-jwt/dev\n  body:\n    - !webservice\n    - !group apps\n    - !permit\n      role: !group apps\n      privilege: [ read, authenticate ]\n      resource: !webservice\n    # Use public-keys instead of jwks-uri\n    - !variable public-keys\n    - !variable issuer\n    - !variable token-app-property\n    - !variable identity-path\n    - !variable audience\n\n# Application Secrets\n- !policy\n  id: secrets\n  body:\n    - !group consumers\n    - &amp;variables\n      - !variable username\n      - !variable password\n      - !variable db-url\n    - !permit\n      role: !group consumers\n      privilege: [ read, execute ]\n      resource: *variables\n\n# Host Identity for JWT Authentication\n- !policy\n  id: jwt-apps\n  body:\n    - !host\n      id: system:serviceaccount:jwt-test-app:jwt-test-app-sa\n      annotations:\n        authn-jwt/dev/sub: system:serviceaccount:jwt-test-app:jwt-test-app-sa\n\n# Grant Host to JWT Authenticator Group\n- !grant\n  role: !group conjur/authn-jwt/dev/apps\n  member: !host jwt-apps/system:serviceaccount:jwt-test-app:jwt-test-app-sa\n\n# Grant Host Access to Secrets\n- !grant\n  role: !group secrets/consumers\n  member: !host jwt-apps/system:serviceaccount:jwt-test-app:jwt-test-app-sa\n</code></pre> <p>Load the policy:</p> <pre><code>conjur policy load -b root -f conjur-policy.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-2-configure-jwt-authenticator-variables","title":"Step 2: Configure JWT Authenticator Variables","text":"<p>Important: Use <code>public-keys</code> instead of <code>jwks-uri</code>. The <code>jwks-uri</code> approach fails because Conjur cannot reach the Kubernetes API server due to SSL certificate issues.</p> <p>Note: Using <code>jq</code> to format the public-keys JSON ensures proper quoting. Malformed JSON (missing quotes around keys) will cause JWT authentication to fail with 401 errors.</p> <pre><code># Get Kubernetes JWKS public keys and format as proper JSON\nkubectl get --raw /openid/v1/jwks &gt; /tmp/jwks.json\njq -n --slurpfile jwks /tmp/jwks.json '{\"type\":\"jwks\",\"value\":$jwks[0]}' &gt; /tmp/public-keys.json\n\n# Set public-keys from file (ensures proper JSON formatting)\nconjur variable set -i conjur/authn-jwt/dev/public-keys -v \"$(cat /tmp/public-keys.json)\"\n\n# Set issuer\nconjur variable set -i conjur/authn-jwt/dev/issuer \\\n  -v \"https://kubernetes.default.svc.cluster.local\"\n\n# Set token-app-property\nconjur variable set -i conjur/authn-jwt/dev/token-app-property -v \"sub\"\n\n# Set identity-path\nconjur variable set -i conjur/authn-jwt/dev/identity-path -v \"jwt-apps\"\n\n# Set audience\nconjur variable set -i conjur/authn-jwt/dev/audience \\\n  -v \"https://conjur-conjur-oss.conjur.svc.cluster.local\"\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-3-set-application-secrets","title":"Step 3: Set Application Secrets","text":"<pre><code>conjur variable set -i secrets/username -v \"admin-user\"\n\nconjur variable set -i secrets/password -v \"super-secret-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-4-create-application-namespace","title":"Step 4: Create Application Namespace","text":"<pre><code>kubectl create namespace jwt-test-app\nkubectl create serviceaccount jwt-test-app-sa -n jwt-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-5-install-namespace-prep","title":"Step 5: Install Namespace Prep","text":"<pre><code>helm install conjur-config-jwt-test cyberark/conjur-config-namespace-prep -n jwt-test-app \\\n  --set conjur.configMap.namespace=conjur \\\n  --set conjur.configMap.name=conjur-configmap \\\n  --set authnK8s.goldenConfigMap=conjur-configmap \\\n  --set authnK8s.namespace=conjur\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-6-create-rbac-for-secrets-provider","title":"Step 6: Create RBAC for Secrets Provider","text":"<p>Create <code>rbac.yaml</code>:</p> <pre><code>apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: secrets-provider-role\n  namespace: jwt-test-app\nrules:\n- apiGroups: [\"\"]\n  resources: [\"secrets\"]\n  verbs: [\"get\", \"update\", \"patch\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: secrets-provider-rolebinding\n  namespace: jwt-test-app\nsubjects:\n- kind: ServiceAccount\n  name: jwt-test-app-sa\n  namespace: jwt-test-app\nroleRef:\n  kind: Role\n  name: secrets-provider-role\n  apiGroup: rbac.authorization.k8s.io\n</code></pre> <p>Apply:</p> <pre><code>kubectl apply -f rbac.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-7-deploy-application-with-secrets-provider-sidecar","title":"Step 7: Deploy Application with Secrets Provider Sidecar","text":"<p>Create <code>deployment.yaml</code>:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jwt-test-app\n  namespace: jwt-test-app\n  annotations:\n    reloader.stakater.com/search: \"true\"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: jwt-test-app\n  template:\n    metadata:\n      labels:\n        app: jwt-test-app\n      annotations:\n        # Required for sidecar refresh\n        conjur.org/container-mode: sidecar\n        conjur.org/secrets-refresh-interval: 30s\n    spec:\n      serviceAccountName: jwt-test-app-sa\n      containers:\n      - name: app\n        image: busybox:latest\n        command: [\"sh\", \"-c\", \"while true; do echo \\\"Username: $APP_USERNAME\\\"; echo \\\"Password: $APP_PASSWORD\\\"; sleep 30; done\"]\n        # App must reference the secret for Reloader to trigger restart\n        env:\n        - name: APP_USERNAME\n          valueFrom:\n            secretKeyRef:\n              name: app-secrets\n              key: username\n        - name: APP_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: app-secrets\n              key: password\n\n      - name: conjur-secrets-provider\n        image: cyberark/secrets-provider-for-k8s:1.6.1\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: CONJUR_ACCOUNT\n          valueFrom:\n            configMapKeyRef:\n              name: conjur-connect\n              key: CONJUR_ACCOUNT\n        - name: CONJUR_APPLIANCE_URL\n          valueFrom:\n            configMapKeyRef:\n              name: conjur-connect\n              key: CONJUR_APPLIANCE_URL\n        - name: CONJUR_AUTHN_URL\n          value: \"https://conjur-conjur-oss.conjur.svc.cluster.local/authn-jwt/dev\"\n        - name: CONJUR_SSL_CERTIFICATE\n          valueFrom:\n            configMapKeyRef:\n              name: conjur-connect\n              key: CONJUR_SSL_CERTIFICATE\n        - name: SSL_CERT_FILE\n          value: /etc/ssl/conjur/conjur.pem\n        - name: MY_POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: MY_POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n        - name: K8S_SECRETS\n          value: \"app-secrets\"\n        - name: SECRETS_DESTINATION\n          value: \"k8s_secrets\"\n        - name: CONTAINER_MODE\n          value: \"sidecar\"\n        - name: DEBUG\n          value: \"true\"\n        - name: JWT_TOKEN_PATH\n          value: /var/run/secrets/tokens/jwt\n        volumeMounts:\n        - name: conjur-secrets\n          mountPath: /conjur/secrets\n        - name: jwt-token\n          mountPath: /var/run/secrets/tokens\n          readOnly: true\n        - name: conjur-ssl\n          mountPath: /etc/ssl/conjur\n          readOnly: true\n        - name: podinfo\n          mountPath: /conjur/podinfo\n\n      volumes:\n      - name: conjur-secrets\n        emptyDir:\n          medium: Memory\n      - name: jwt-token\n        projected:\n          sources:\n          - serviceAccountToken:\n              path: jwt\n              expirationSeconds: 6000\n              audience: https://conjur-conjur-oss.conjur.svc.cluster.local\n      - name: conjur-ssl\n        configMap:\n          name: conjur-connect\n          items:\n          - key: CONJUR_SSL_CERTIFICATE\n            path: conjur.pem\n      - name: podinfo\n        downwardAPI:\n          defaultMode: 420\n          items:\n          - path: annotations\n            fieldRef:\n              apiVersion: v1\n              fieldPath: metadata.annotations\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secrets\n  namespace: jwt-test-app\n  annotations:\n    reloader.stakater.com/match: \"true\"\ntype: Opaque\nstringData:\n  username: \"\"\n  password: \"\"\n  conjur-map: |\n    username: secrets/username\n    password: secrets/password\n</code></pre> <p>Apply:</p> <pre><code>kubectl apply -f deployment.yaml\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-8-verify-the-setup","title":"Step 8: Verify the Setup","text":""},{"location":"integrations/conjur/conjur-sidecar.html#check-pod-status","title":"Check Pod Status","text":"<pre><code>kubectl get pods -n jwt-test-app\n</code></pre> <p>Both containers should be Running.</p>"},{"location":"integrations/conjur/conjur-sidecar.html#check-sidecar-logs","title":"Check Sidecar Logs","text":"<pre><code>kubectl logs -n jwt-test-app deployment/jwt-test-app -c conjur-secrets-provider\n</code></pre> <p>Look for: - <code>CAKC035 Successfully authenticated</code> - <code>CSPFK009I DAP/Conjur Secrets updated in Kubernetes successfully</code></p>"},{"location":"integrations/conjur/conjur-sidecar.html#verify-secrets-are-populated","title":"Verify Secrets are Populated","text":"<pre><code>kubectl get secret app-secrets -n jwt-test-app -o jsonpath='{.data.password}' | base64 -d\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#step-9-test-secret-rotation","title":"Step 9: Test Secret Rotation","text":""},{"location":"integrations/conjur/conjur-sidecar.html#update-secret-in-conjur","title":"Update Secret in Conjur","text":"<pre><code>conjur variable set -i secrets/password -v \"new-rotated-password\"\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#wait-and-verify","title":"Wait and Verify","text":"<p>Wait 30-60 seconds for sidecar refresh and Reloader restart:</p> <pre><code># Check secret was updated\nkubectl get secret app-secrets -n jwt-test-app -o jsonpath='{.data.password}' | base64 -d\n\n# Check pod was restarted\nkubectl get pods -n jwt-test-app -l app=jwt-test-app\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#key-configuration-points","title":"Key Configuration Points","text":""},{"location":"integrations/conjur/conjur-sidecar.html#jwt-authenticator-variables","title":"JWT Authenticator Variables","text":"Variable Description Value <code>public-keys</code> JWKS for token validation <code>{\"type\":\"jwks\",\"value\":{\"keys\":[...]}}</code> <code>issuer</code> Expected <code>iss</code> claim <code>https://kubernetes.default.svc.cluster.local</code> <code>token-app-property</code> JWT claim for identity <code>sub</code> <code>identity-path</code> Policy path for hosts <code>jwt-apps</code> <code>audience</code> Expected <code>aud</code> claim Conjur URL"},{"location":"integrations/conjur/conjur-sidecar.html#why-public-keys-instead-of-jwks-uri","title":"Why <code>public-keys</code> Instead of <code>jwks-uri</code>?","text":"<p>When using <code>jwks-uri</code>, Conjur tries to fetch JWKS from the Kubernetes API server but fails due to SSL certificate verification issues. With <code>public-keys</code>, we provide the JWKS directly to Conjur.</p>"},{"location":"integrations/conjur/conjur-sidecar.html#required-pod-annotations","title":"Required Pod Annotations","text":"<p>These must be on the Pod template metadata:</p> <pre><code>annotations:\n  conjur.org/container-mode: sidecar\n  conjur.org/secrets-refresh-interval: 30s\n</code></pre>"},{"location":"integrations/conjur/conjur-sidecar.html#required-volumes","title":"Required Volumes","text":"Volume Purpose <code>jwt-token</code> Projected ServiceAccount token with custom audience <code>conjur-ssl</code> SSL certificate for Conjur <code>podinfo</code> DownwardAPI to expose pod annotations to sidecar <code>conjur-secrets</code> emptyDir for sidecar use"},{"location":"integrations/conjur/conjur-sidecar.html#reloader-annotations","title":"Reloader Annotations","text":"Resource Annotation Deployment <code>reloader.stakater.com/search: \"true\"</code> Secret <code>reloader.stakater.com/match: \"true\"</code> (must be annotation, not label)"}]}